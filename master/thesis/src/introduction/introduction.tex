% Giving the thesis a purpose (not how, but why)
%   Mention problems in industry practice (mention software product lines)
%   Say what software product lines are for, not technicalities, why they exist
%   Talk about why planning is difficult, when the project size is increasing
%   -> Changing the plan is even more difficult, and there is a lack of automated tools for checking that the changes don't break anything
%   Drawing a picture of the domain and the problem
%   My thesis is addressing these challenges by looking at these research questions or goals
% Last part of introduction: research questions/goals (base structure of thesis on this) - 3 is a good number
% They are general. What, how, (never why)
% In this thesis, I will address these questions through these activities ...(will not tackle everything, so make the purpose clear)
% Start broader, chunk down to more detail
% Can take the goals up again in the following sections (mention the research questions when tackling them)
% How the sensor should read my master's thesis. How will she know what my contribution is, where it comes in. "In chapter 2 I will give the background, limited to the scope of my thesis". Make it clear that I'm not trying to cover everything, and give the logic/structure of the thesis.

% Storyline: SPLs -> planning -> existing solution (LTEP) -> problem with that solution -> goal

% High-level introduction to software product lines

% Can talk about static analysis in terms of related work or background.
% -> Semantic-based analysis
% -> Forward analysis and scope (live variable analysis etc)
% - Bring up research questions after this

% Reference previous work clearly, talk about how my work builds upon it.
\chapter{Introduction}

A software product line (SPL) capitalizes on the similarity and variability of closely related software products \cite{book:introduction-to-spl}. The similarities and variability are captured by features, which are customer-visible characteristics of a system \cite{book:introduction-to-spl}. Each product in the product line (called a \textit{variant}) comprises a selection of these features, resulting in a flexible and customizable set of variants available to customers. To model an SPL it is common to use a feature model, a tree-like structure with nodes representing features. From this model, a variant can be derived by selecting features. The feature model's structure creates restrictions for which variants are allowed, while they also make it possible to model all possible variants at once \cite{art:feature-models-grammars-and-propositional-formulas}.

SPLs grow large as they are more profitable the more variants they originate \cite{book:introduction-to-spl}, % page 10 (34 absolute)
and evolve over time as requirements change. Complex projects require planning. Intuitively, this means describing how the feature model should look at a future point in time. For instance, new technology may emerge that the manager wishes to incorporate in the product line, but which takes a year to implement. One can then plan how the feature model will look at that point, as well as at some earlier stages where the technology is partly included. However, as requirements change, plans must adapt, and it may be necessary to change an existing plan, for instance by removing or adding features.

\section{The LTEP project}
\label{sec:the-ltep-project}
% Se prosjektbeskrivelsen, kanskje i søknaden til NFR og DAAD. (project proposal)
% Overordnet om prosjektet;
% Når det begynte
% hvem som er med og , noe om NFR og tysk ekvivalent (DAAD).
% Hva målet er og hva vi har gjort med det 
   % 
% Forskerlinjen, Eirik og sommerprosjektet (sommeren 2019). Planla, gjennomførte og skrev en rapport med forskning som senere ble bearbeidet videre til en publisert artikkel (referanse). Vi lagde en formell semantikk for endring av feature models og implementerte den i Maude. I tillegg lagde vi et query language for å beskrive temporale egenskaper ved feature models, samt en modellsjekker som kan verfisere at disse egenskapene eksisterer. \footnote{\url{githubgreier}}
% I artikkelen er dette integrert i DarwinSPL slik at man kan gjøre planendringer. 
% Mitt bidrag skal oppfylle M3, som er en measure i prosjektbeskrivelsen til LTEP. Få fram at dette er en konkret del i et fundet forskningsprosjekt

The research project this thesis is built upon (see Section~\vref{sec:the-ltep-project}) defines \emph{feature model evolution plans} (FMEP) in terms of feature models~\cite{art:consistency-preserving-evolution-planning}. \todo{Belys en forskjell på en plan og en planendring} A FMEP consists of the initial feature model and a sequence of edit operations. In the same project, we have devised a method to detect paradoxes in a feature model evolution plan. \todo{Beskriv paradoxes} However, when a plan is changed, this method requires that the entire plan be verified, and for large plans, this may be inefficient. This is due to the fact that the method relies on feature model change rather than FMEP change. 

\section{Objective}
\label{sec:objective}

\todo{write}
Develop an analysis method that exploits how plan changes do not affect all parts of the plan, thus achieving a more modular analysis than the one defined in~\cite{art:consistency-preserving-evolution-planning}.

\section{Research questions}
\label{sec:research-questions}

In order to reach the objective, we present research questions that will be addressed in the conclusion of the thesis.

\begin{enumerate}[\itbf{RQ\arabic*}, itemsep=0mm]
   \item \textit{Which operations are useful for modifying a feature model evolution plan?} In the LTEP project, we defined operations for modifying a feature model, but not a feature model evolution plan. \label{rq1}
   \item \textit{How can we capture all the states of a feature model evolution plan in such a way that the scope of each operation can be isolated?} Modifying a feature model evolution plan does not necessarily affect the entire plan. We wish to identify which parts of the plan \emph{may} be affected by applying an operation, i.e. the \emph{scope} of each operation. This problem requires a representation for feature model evolution plans that allows us to isolate the scope and analyse the effects of applying an operation \emph{locally}. \label{rq2}
   \item \textit{How can we analyse change to ensure soundness?} 
      Changing an intermediate stage of a feature model evolution plan may cause \emph{paradoxes} \textemdash{} structural violations of the feature model \textemdash{} at a later stage of the plan. 
      We aim to create an analysis method which ensures that any paradox arising from plan change is discovered and reported. This analysis method should be verifiably sound and possible to automate. \label{rq3}
\end{enumerate}

\section{Contributions}

In this thesis, we present a set of edit operations for changing feature model evolution plans. We furthermore define the scope of each of these operations, meaning that we deduce exactly which parts of a plan may be affected by each operation. A representation for feature model evolution plan is devised with the aim to easily isolate a scope for analysis. Based on the scope and representations, we create an analysis method for validation and application of the edit operations. The analysis is formalized as a set of rules, giving detailed specification of when an operation may be applied to the evolution plan, and how to apply the modification. We implement a prototype\footnote{\todo{Create a repo}} of the analysis as proof of concept. Finally, we give an inductive proof that the rule set is sound by showing that each rule preserves soundness, that each rule stays within the specified scope, and that it updates the evolution plan correctly according to the semantics of the operation applied.
